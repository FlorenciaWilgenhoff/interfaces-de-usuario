<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8 " />
		<title>Template</title>
	</head>
		<canvas id="canvas" width="900" height="800" style="border:#000 solid 1px;" />
	<body>
	<script>
  let canvas = document.getElementById("canvas");

  let ctx = canvas.getContext("2d");
   var width= canvas.width;
   var height= canvas.height ;

   var image1 = new Image();
	 image1.src = "gato.jpg";
	  image1.onload = function(){
  
  ctx.drawImage(this, 0, 0);
  
  imageData = ctx.getImageData(0, 0, this.width, this.height);
  
  for ( x = 0; x < this.width; x++) {
   for ( y = 0; y < this.height; y++) {
      setPixel(imageData, x, y);
      }
  }
  ctx.putImageData(imageData, 0,0);
 }
 	function setPixel(imageData, x, y, r, g, b, a){
 		index=(x+y*imageData.width)*4;
 		var blackAndWhite = (getRed(imageData, x, y)+getGreen(imageData, x, y)+getBlue(imageData, x, y))/3;
 		 imageData.data[index+0]=blackAndWhite;
	     imageData.data[index+1]=blackAndWhite;
	     imageData.data[index+2]=blackAndWhite;
	     imageData.data[index+3]=255;
 	}
	 function getRed(imageData, x, y){
	 	index=(x+y*imageData.width)*4;
	 	return imageData.data[index+0];
	 }

	 function getGreen(imageData, x, y){
	 	index=(x+y*imageData.width)*4;
	 	return imageData.data[index+1];
	 }

	 function getBlue(imageData, x, y){
	 	index=(x+y*imageData.width)*4;
	 	return imageData.data[index+2];
	 }

	</script>
</body>
</html>
